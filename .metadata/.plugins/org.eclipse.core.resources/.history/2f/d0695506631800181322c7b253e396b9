package daa38.Statistics.Auxiliary;

public class SyncMemoryConsumptionTracker {
	private long mBytesConsumed;
	private long mBytesUsedMax;
	private boolean mTracking;
	
	public SyncMemoryConsumptionTracker()
	{
		mBytesConsumed = 0;
		mTracking = true;
	}
	
	public synchronized void addBytes(long pBytes)
	{
		//System.out.println("Add bytes called with "+pBytes);
		if (mTracking)
			mBytesConsumed += pBytes;
		else
			System.out.println("But we finished tracking");
	}
	
	public synchronized void maxBytesUsed(long pBytes)
	{
		if (pBytes > mBytesUsedMax)
			mBytesUsedMax = pBytes;
		
	}
	
	public synchronized void endTracking()
	{
		//System.out.println("End tracking called");
		long lBytesAtEnd = Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
		//System.out.println("Adding "+lBytesAtEnd);
		mBytesConsumed += lBytesAtEnd;
		mTracking = false;
	}
	
	public synchronized long getCurrentBytes()
	{
		return mBytesConsumed;
	}
	
	
}
