package daa38;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

public class VariablesRestrictions {
	public HashMap<Variable, Collection<Integer> > lVRs;
	
	public VariablesRestrictions()
	{
		lVRs = new HashMap<Variable, Collection<Integer> >();
	}
	
	// Returns false if it attemps to remove a value from the domain of a variable and fails
	// Theoretically should never return false. Will implement error throwing later on this one.
	public static boolean enforceRestrictions()
	{
		boolean lBadEnforce = false;
		for (Map.Entry<Variable, Collection<Integer> > lVR : lVRs)
		{
			Variable lVar = lVR.getKey();
			for (Integer lInt : lVR.getValue())
			{
				if (!lVar.mDomain.remove(lInt))
					lBadEnforce = true;
			}
		}
		
		return (!lBadEnforce);
	}
	
	// POSSIBLE TIME EFFICIENCY IMPROVEMENT IF I DO NOT CHECK WHETHER THE DOMAIN CONTAINS THE VALUE
	// Returns false if it attemps to add a value to a domain, but the domain already contains that value.
	// Theoretically should never return false. Will implement error throwing later on this one.
	public static boolean liftRestrictions(HashMap<Variable, Collection<Integer> > pRes)
	{
		boolean lBadLift = false;
		for (Map.Entry<Variable, Collection<Integer> > lVR : lVRs)
		{
			Variable lVar = lVR.getKey();
			for (Integer lInt : lVR.getValue())
			{
				if (lVar.mDomain.contains(lInt))
					lBadLift = true;
				else
					lVar.mDomain.add(lInt);
			}
		}
		
		return (!lBadLift);
	}
}
